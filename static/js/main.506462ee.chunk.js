(this["webpackJsonpreg-auth"]=this["webpackJsonpreg-auth"]||[]).push([[0],{169:function(e,a,r){e.exports=r(253)},175:function(e,a,r){},253:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t),o=r(24),s=r.n(o),u=(r(174),r(175),r(41)),i=r(15),l=r(149),c=r(34),m=r(52),d={token:null,username:"",email:"",isLogIn:!0,id:null,errors:"",isProcessing:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"AUTH_REQUEST":var r=a.payload.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{isProcessing:r});case"AUTH_SUCCES":var t=a.payload;return Object(m.a)(Object(m.a)({},e),t);case"AUTH_FAILURE":var n=a.payload,o=n.errors,s=n.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{errors:o,isProcessing:s});case"LOG_OUT":return d;default:return e}},p=Object(u.c)({auth:h});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=r(44),E=r(256),b=r(123),v=r(74),f=r(118),F=r.n(f),O=r(152),y=r(153),S=r.n(y),w=function(e,a,r,t){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{type:"AUTH_SUCCES",payload:{username:e,email:a,token:r,id:t,isLogIn:n,isProcessing:o}}},A=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"AUTH_FAILURE",payload:{errors:e,isProcessing:a}}},N=function(e,a,r,t){return function(){var n=Object(O.a)(F.a.mark((function n(o){var s,u,i,l,c,m,d,h;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={username:t,email:e,password:a},u="https://conduit.productionready.io/api/users",r&&(s={email:e,password:a},u="https://conduit.productionready.io/api/users/login"),o({type:"AUTH_REQUEST",payload:{isProcessing:!0}}),n.prev=4,n.next=7,S.a.post(u,{user:s});case 7:i=n.sent,l=i.data.user,c=l.username,m=l.email,d=l.token,h=l.id,localStorage.setItem("token",d),localStorage.setItem("userId",h),o(w(c,m,d,h)),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(4),o(A(n.t0.response.data.errors));case 17:case"end":return n.stop()}}),n,null,[[4,14]])})));return function(e){return n.apply(this,arguments)}}()},_=r(29),R=_.a().shape({username:_.b().max(20,"Must be shorter").required("Required"),email:_.b().email("Invalid email address").required("Required"),password:_.b().min(8,"Must be longer than 8 characters").max(40,"Must be shorter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Must have one Big or more letter and one or more number").required("Required")}),k=r(257),P=r(155),U=r.n(P),I=Object(i.b)((function(e){return{serverErrors:e.auth.errors}}))((function(e){var a=e.serverErrors;if(!a)return null;var r=n.a.createElement("ul",{className:"ServerErrors"},Object.keys(a).map((function(e,r){return n.a.createElement("li",{key:U.a.uniqueId(r),className:"ServerErrors-Item"},n.a.createElement(k.a,{twoToneColor:"#cf1322"}),n.a.createElement("span",{className:"ServerErrors-ItemText"},"".concat(e,": ").concat(a[e])))})));return n.a.createElement("div",{className:"ServerErrorsWrap"},r)})),T={username:"",email:"",password:""},L=Object(i.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{authFunc:function(a,r,t,n){return e(N(a,r,t,n))},logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.isAuth,r=e.authFunc,t=e.logOutFunc,o=e.isProcessing,s=function(e,a,r,t,o,s,u,i){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(r),n.a.createElement(E.a,{className:"Form-Field",type:a,name:e,placeholder:r,id:e,onChange:o,onBlur:s,value:t[e],style:i[e]&&u[e]?{borderColor:"red"}:{}}),i[e]&&u[e]&&n.a.createElement("div",{className:"Form-RequredField"},u[e]))};return a?n.a.createElement(g.a,{to:"Reg-Auth-Forms/"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Signup Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(v.b,{initialValues:T,validationSchema:R,onSubmit:function(e,a){var t=e.email,n=e.password,o=e.username;r(t,n,!1,o),a.resetForm(T)}},(function(e){var a=e.values,r=e.handleChange,t=e.errors,u=e.touched,i=e.handleBlur,l=e.handleSubmit;return n.a.createElement(v.a,{className:"Form",onSubmit:l},s("username","text","User Name",a,r,i,t,u),s("email","email","Email",a,r,i,t,u),s("password","password","Password",a,r,i,t,u),n.a.createElement(b.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Sign up"),n.a.createElement(I,null))})),n.a.createElement(c.b,{to:"Reg-Auth-Forms/login",onClick:t},"Log in")))})),j=_.a().shape({email:_.b().email("Invalid email address").required("Required"),password:_.b().min(8,"Must be longer than 8 characters").max(40,"Must be shorter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Must have one Big or more letter and one or more number").required("Required")}),C={email:"",password:""},B=Object(i.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{authFunc:function(a,r,t){return e(N(a,r,t))},logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.isAuth,r=e.authFunc,t=e.logOutFunc,o=e.isProcessing,s=function(e,a,r,t,o,s,u,i){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(r),n.a.createElement(E.a,{className:"Form-Field",type:a,name:e,placeholder:r,id:e,onChange:o,onBlur:s,value:t[e],style:i[e]&&u[e]?{borderColor:"red"}:{}}),i[e]&&u[e]&&n.a.createElement("div",{className:"Form-RequredField"},u[e]))};return a?n.a.createElement(g.a,{to:"Reg-Auth-Forms/"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Login Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(v.b,{initialValues:C,validationSchema:j,onSubmit:function(e,a){var t=e.email,n=e.password;r(t,n,!0),a.resetForm(C)}},(function(e){var a=e.values,r=e.handleChange,t=e.errors,u=e.touched,i=e.handleBlur,l=e.handleSubmit;return n.a.createElement(v.a,{className:"Form",onSubmit:l},s("email","email","Email",a,r,i,t,u),s("password","password","Password",a,r,i,t,u),n.a.createElement(b.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Log in"),n.a.createElement(I,null))})),n.a.createElement(c.b,{to:"Reg-Auth-Forms/signup",onClick:t},"Signup")))})),q=Object(i.b)((function(e){return{username:e.auth.username,isAuth:!!e.auth.token}}),(function(e){return{logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.username,r=e.isAuth,t=e.logOutFunc,o=function(){t(),localStorage.removeItem("token"),localStorage.removeItem("userId")};return r?n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Home Page"),n.a.createElement("div",{className:"UserBioWrap"},n.a.createElement("div",{className:"UserBio"},a),n.a.createElement(b.a,{className:"Btn",type:"primary",onClick:o},"Log out"))):n.a.createElement(g.a,{to:"Reg-Auth-Forms/login"})}));var x=Object(i.b)((function(e){return{user:e.user,token:e.token,email:e.email,isLogIn:e.isLogIn}}))((function(){return n.a.createElement("div",{className:"App"},n.a.createElement(g.d,null,n.a.createElement(g.b,{path:"Reg-Auth-Forms/signup",component:L}),n.a.createElement(g.b,{path:"Reg-Auth-Forms/login",component:B}),n.a.createElement(g.b,{path:"Reg-Auth-Forms/",component:q}),n.a.createElement(g.a,{to:"Reg-Auth-Forms/"})))})),M="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):u.d,H=Object(u.e)(p,M(Object(u.a)(l.a))),W=n.a.createElement(c.a,null,n.a.createElement(i.a,{store:H},n.a.createElement(x,null)));s.a.render(W,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[169,1,2]]]);
//# sourceMappingURL=main.506462ee.chunk.js.map