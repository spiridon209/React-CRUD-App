(this["webpackJsonpreg-auth"]=this["webpackJsonpreg-auth"]||[]).push([[0],{169:function(e,a,r){e.exports=r(253)},175:function(e,a,r){},253:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t),o=r(24),s=r.n(o),i=(r(174),r(175),r(41)),l=r(15),c=r(149),u=r(34),m=r(52),d={token:null,username:"",email:"",isLogIn:!0,id:null,errors:"",isProcessing:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"AUTH_REQUEST":var r=a.payload.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{isProcessing:r});case"AUTH_SUCCES":var t=a.payload;return Object(m.a)(Object(m.a)({},e),t);case"AUTH_FAILURE":var n=a.payload,o=n.errors,s=n.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{errors:o,isProcessing:s});case"LOG_OUT":return d;default:return e}},p=Object(i.c)({auth:h});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=r(44),E=r(256),b=r(123),v=r(74),f=r(118),O=r.n(f),F=r(152),y=r(153),S=r.n(y),w=function(e,a,r,t){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{type:"AUTH_SUCCES",payload:{username:e,email:a,token:r,id:t,isLogIn:n,isProcessing:o}}},N=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"AUTH_FAILURE",payload:{errors:e,isProcessing:a}}},_=function(e,a,r,t){return function(){var n=Object(F.a)(O.a.mark((function n(o){var s,i,l,c,u,m,d,h;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={username:t,email:e,password:a},i="https://conduit.productionready.io/api/users",r&&(s={email:e,password:a},i="https://conduit.productionready.io/api/users/login"),o({type:"AUTH_REQUEST",payload:{isProcessing:!0}}),n.prev=4,n.next=7,S.a.post(i,{user:s});case 7:l=n.sent,c=l.data.user,u=c.username,m=c.email,d=c.token,h=c.id,localStorage.setItem("token",d),localStorage.setItem("userId",h),o(w(u,m,d,h)),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(4),o(N(n.t0.response.data.errors));case 17:case"end":return n.stop()}}),n,null,[[4,14]])})));return function(e){return n.apply(this,arguments)}}()},k=r(29),A=k.a().shape({username:k.b().max(20,"Must be shorter").required("Required"),email:k.b().email("Invalid email address").required("Required"),password:k.b().min(8,"Must be longer than 8 characters").max(40,"Must be shorter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Must have one Big or more letter and one or more number").required("Required")}),P=r(257),U=r(155),I=r.n(U),T=Object(l.b)((function(e){return{serverErrors:e.auth.errors}}))((function(e){var a=e.serverErrors;if(!a)return null;var r=n.a.createElement("ul",{className:"ServerErrors"},Object.keys(a).map((function(e,r){return n.a.createElement("li",{key:I.a.uniqueId(r),className:"ServerErrors-Item"},n.a.createElement(P.a,{twoToneColor:"#cf1322"}),n.a.createElement("span",{className:"ServerErrors-ItemText"},"".concat(e,": ").concat(a[e])))})));return n.a.createElement("div",{className:"ServerErrorsWrap"},r)})),L={username:"",email:"",password:""},j=Object(l.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{authFunc:function(a,r,t,n){return e(_(a,r,t,n))},logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.isAuth,r=e.authFunc,t=e.logOutFunc,o=e.isProcessing,s=function(e,a,r,t,o,s,i,l){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(r),n.a.createElement(E.a,{className:"Form-Field",type:a,name:e,placeholder:r,id:e,onChange:o,onBlur:s,value:t[e],style:l[e]&&i[e]?{borderColor:"red"}:{}}),l[e]&&i[e]&&n.a.createElement("div",{className:"Form-RequredField"},i[e]))};return a?n.a.createElement(g.a,{to:"/"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Signup Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(v.b,{initialValues:L,validationSchema:A,onSubmit:function(e,a){var t=e.email,n=e.password,o=e.username;r(t,n,!1,o),a.resetForm(L)}},(function(e){var a=e.values,r=e.handleChange,t=e.errors,i=e.touched,l=e.handleBlur,c=e.handleSubmit;return n.a.createElement(v.a,{className:"Form",onSubmit:c},s("username","text","User Name",a,r,l,t,i),s("email","email","Email",a,r,l,t,i),s("password","password","Password",a,r,l,t,i),n.a.createElement(b.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Sign up"),n.a.createElement(T,null))})),n.a.createElement(u.b,{to:"/login",onClick:t},"Log in")))})),C=k.a().shape({email:k.b().email("Invalid email address").required("Required"),password:k.b().min(8,"Must be longer than 8 characters").max(40,"Must be shorter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Must have one Big or more letter and one or more number").required("Required")}),B={email:"",password:""},R=Object(l.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{authFunc:function(a,r,t){return e(_(a,r,t))},logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.isAuth,r=e.authFunc,t=e.logOutFunc,o=e.isProcessing,s=function(e,a,r,t,o,s,i,l){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(r),n.a.createElement(E.a,{className:"Form-Field",type:a,name:e,placeholder:r,id:e,onChange:o,onBlur:s,value:t[e],style:l[e]&&i[e]?{borderColor:"red"}:{}}),l[e]&&i[e]&&n.a.createElement("div",{className:"Form-RequredField"},i[e]))};return a?n.a.createElement(g.a,{to:"/"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Login Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(v.b,{initialValues:B,validationSchema:C,onSubmit:function(e,a){var t=e.email,n=e.password;r(t,n,!0),a.resetForm(B)}},(function(e){var a=e.values,r=e.handleChange,t=e.errors,i=e.touched,l=e.handleBlur,c=e.handleSubmit;return n.a.createElement(v.a,{className:"Form",onSubmit:c},s("email","email","Email",a,r,l,t,i),s("password","password","Password",a,r,l,t,i),n.a.createElement(b.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Log in"),n.a.createElement(T,null))})),n.a.createElement(u.b,{to:"/signup",onClick:t},"Signup")))})),q=Object(l.b)((function(e){return{username:e.auth.username,isAuth:!!e.auth.token}}),(function(e){return{logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.username,r=e.isAuth,t=e.logOutFunc,o=function(){t(),localStorage.removeItem("token"),localStorage.removeItem("userId")};return r?n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Home Page"),n.a.createElement("div",{className:"UserBioWrap"},n.a.createElement("div",{className:"UserBio"},a),n.a.createElement(b.a,{className:"Btn",type:"primary",onClick:o},"Log out"))):n.a.createElement(g.a,{to:"".concat("/Reg-Auth-Forms","/login")})}));var x=Object(l.b)((function(e){return{user:e.user,token:e.token,email:e.email,isLogIn:e.isLogIn}}))((function(){return n.a.createElement("div",{className:"App"},n.a.createElement(g.d,null,n.a.createElement(g.b,{path:"/signup",component:j}),n.a.createElement(g.b,{path:"/login",component:R}),n.a.createElement(g.b,{path:"/",component:q}),n.a.createElement(g.a,{to:"/"})))})),M="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):i.d,H=Object(i.e)(p,M(Object(i.a)(c.a))),W=n.a.createElement(u.a,{basename:"/Reg-Auth-Forms"},n.a.createElement(l.a,{store:H},n.a.createElement(x,null)));s.a.render(W,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[169,1,2]]]);
//# sourceMappingURL=main.914848ab.chunk.js.map