(this["webpackJsonpreg-auth"]=this["webpackJsonpreg-auth"]||[]).push([[0],{169:function(e,a,t){e.exports=t(253)},175:function(e,a,t){},253:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(24),s=t.n(o),c=(t(174),t(175),t(41)),u=t(15),i=t(149),l=t(34),m=t(52),d={token:null,username:"",email:"",isLogIn:!0,id:null,errors:"",isProcessing:!1},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"AUTH_REQUEST":var t=a.payload.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{isProcessing:t});case"AUTH_SUCCES":var r=a.payload;return Object(m.a)(Object(m.a)({},e),r);case"AUTH_FAILURE":var n=a.payload,o=n.errors,s=n.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{errors:o,isProcessing:s});case"LOG_OUT":return d;default:return e}},p=Object(c.c)({auth:h});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=t(44),E=t(256),b=t(123),v=t(74),f=t(118),F=t.n(f),O=t(152),y=t(153),S=t.n(y),w=function(e,a,t,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{type:"AUTH_SUCCES",payload:{username:e,email:a,token:t,id:r,isLogIn:n,isProcessing:o}}},A=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"AUTH_FAILURE",payload:{errors:e,isProcessing:a}}},N=function(e,a,t,r){return function(){var n=Object(O.a)(F.a.mark((function n(o){var s,c,u,i,l,m,d,h;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={username:r,email:e,password:a},c="https://conduit.productionready.io/api/users",t&&(s={email:e,password:a},c="https://conduit.productionready.io/api/users/login"),o({type:"AUTH_REQUEST",payload:{isProcessing:!0}}),n.prev=4,n.next=7,S.a.post(c,{user:s});case 7:u=n.sent,i=u.data.user,l=i.username,m=i.email,d=i.token,h=i.id,localStorage.setItem("token",d),localStorage.setItem("userId",h),o(w(l,m,d,h)),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(4),o(A(n.t0.response.data.errors));case 17:case"end":return n.stop()}}),n,null,[[4,14]])})));return function(e){return n.apply(this,arguments)}}()},_=t(29),R=_.a().shape({username:_.b().max(20,"Must be shorter").required("Required"),email:_.b().email("Invalid email address").required("Required"),password:_.b().min(8,"Must be longer than 8 characters").max(40,"Must be shorter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Must have one Big or more letter and one or more number").required("Required")}),k=t(257),P=t(155),U=t.n(P),I=Object(u.b)((function(e){return{serverErrors:e.auth.errors}}))((function(e){var a=e.serverErrors;if(!a)return null;var t=n.a.createElement("ul",{className:"ServerErrors"},Object.keys(a).map((function(e,t){return n.a.createElement("li",{key:U.a.uniqueId(t),className:"ServerErrors-Item"},n.a.createElement(k.a,{twoToneColor:"#cf1322"}),n.a.createElement("span",{className:"ServerErrors-ItemText"},"".concat(e,": ").concat(a[e])))})));return n.a.createElement("div",{className:"ServerErrorsWrap"},t)})),T={username:"",email:"",password:""},L=Object(u.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{authFunc:function(a,t,r,n){return e(N(a,t,r,n))},logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.isAuth,t=e.authFunc,r=e.logOutFunc,o=e.isProcessing,s=function(e,a,t,r,o,s,c,u){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(t),n.a.createElement(E.a,{className:"Form-Field",type:a,name:e,placeholder:t,id:e,onChange:o,onBlur:s,value:r[e],style:u[e]&&c[e]?{borderColor:"red"}:{}}),u[e]&&c[e]&&n.a.createElement("div",{className:"Form-RequredField"},c[e]))};return a?n.a.createElement(g.a,{to:"".concat("/Reg-Auth-Forms","/")}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Signup Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(v.b,{initialValues:T,validationSchema:R,onSubmit:function(e,a){var r=e.email,n=e.password,o=e.username;t(r,n,!1,o),a.resetForm(T)}},(function(e){var a=e.values,t=e.handleChange,r=e.errors,c=e.touched,u=e.handleBlur,i=e.handleSubmit;return n.a.createElement(v.a,{className:"Form",onSubmit:i},s("username","text","User Name",a,t,u,r,c),s("email","email","Email",a,t,u,r,c),s("password","password","Password",a,t,u,r,c),n.a.createElement(b.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Sign up"),n.a.createElement(I,null))})),n.a.createElement(l.b,{to:"".concat("/Reg-Auth-Forms","/login"),onClick:r},"Log in")))})),j=_.a().shape({email:_.b().email("Invalid email address").required("Required"),password:_.b().min(8,"Must be longer than 8 characters").max(40,"Must be shorter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Must have one Big or more letter and one or more number").required("Required")}),C={email:"",password:""},B=Object(u.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{authFunc:function(a,t,r){return e(N(a,t,r))},logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.isAuth,t=e.authFunc,r=e.logOutFunc,o=e.isProcessing,s=function(e,a,t,r,o,s,c,u){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(t),n.a.createElement(E.a,{className:"Form-Field",type:a,name:e,placeholder:t,id:e,onChange:o,onBlur:s,value:r[e],style:u[e]&&c[e]?{borderColor:"red"}:{}}),u[e]&&c[e]&&n.a.createElement("div",{className:"Form-RequredField"},c[e]))};return a?n.a.createElement(g.a,{to:"".concat("/Reg-Auth-Forms","/")}):n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Login Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(v.b,{initialValues:C,validationSchema:j,onSubmit:function(e,a){var r=e.email,n=e.password;t(r,n,!0),a.resetForm(C)}},(function(e){var a=e.values,t=e.handleChange,r=e.errors,c=e.touched,u=e.handleBlur,i=e.handleSubmit;return n.a.createElement(v.a,{className:"Form",onSubmit:i},s("email","email","Email",a,t,u,r,c),s("password","password","Password",a,t,u,r,c),n.a.createElement(b.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Log in"),n.a.createElement(I,null))})),n.a.createElement(l.b,{to:"".concat("/Reg-Auth-Forms","/signup"),onClick:r},"Signup")))})),q=Object(u.b)((function(e){return{username:e.auth.username,isAuth:!!e.auth.token}}),(function(e){return{logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var a=e.username,t=e.isAuth,r=e.logOutFunc,o=function(){r(),localStorage.removeItem("token"),localStorage.removeItem("userId")};return t?n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Home Page"),n.a.createElement("div",{className:"UserBioWrap"},n.a.createElement("div",{className:"UserBio"},a),n.a.createElement(b.a,{className:"Btn",type:"primary",onClick:o},"Log out"))):n.a.createElement(g.a,{to:"".concat("/Reg-Auth-Forms","/login")})}));var x=Object(u.b)((function(e){return{user:e.user,token:e.token,email:e.email,isLogIn:e.isLogIn}}))((function(){return n.a.createElement("div",{className:"App"},n.a.createElement(g.d,null,n.a.createElement(g.b,{path:"".concat("/Reg-Auth-Forms","/signup"),component:L}),n.a.createElement(g.b,{path:"".concat("/Reg-Auth-Forms","/login"),component:B}),n.a.createElement(g.b,{path:"".concat("/Reg-Auth-Forms","/"),component:q}),n.a.createElement(g.a,{to:"".concat("/Reg-Auth-Forms","/")})))})),M="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):c.d,H=Object(c.e)(p,M(Object(c.a)(i.a))),W=n.a.createElement(l.a,null,n.a.createElement(u.a,{store:H},n.a.createElement(x,null)));s.a.render(W,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[169,1,2]]]);
//# sourceMappingURL=main.8c9ae6de.chunk.js.map