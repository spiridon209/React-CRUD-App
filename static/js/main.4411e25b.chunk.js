(this["webpackJsonpreg-auth"]=this["webpackJsonpreg-auth"]||[]).push([[0],{169:function(e,r,t){e.exports=t(256)},175:function(e,r,t){},179:function(e,r,t){},199:function(e,r,t){},255:function(e,r,t){},256:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t.n(a),o=t(25),s=t.n(o),c=(t(174),t(175),t(41)),u=t(15),i=t(151),l=t(34),m=t(52),d={token:null,username:"",email:"",id:null,errors:"",isProcessing:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"AUTH_REQUEST":var t=r.payload.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{isProcessing:t});case"AUTH_SUCCES":var a=r.payload;return Object(m.a)(Object(m.a)({},e),a);case"AUTH_FAILURE":var n=r.payload,o=n.errors,s=n.isProcessing;return Object(m.a)(Object(m.a)({},e),{},{errors:o,isProcessing:s});case"LOG_OUT":case"RESET_ERRORS":return d;default:return e}},h=Object(c.c)({auth:p});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(179);var E=t(44),g=t(259),v=t(125),f=t(75),b=t(23),F=t.n(b),S=t(72),O=t(120),w=t.n(O),y="".concat("https://conduit.productionready.io/api/","/users/login"),R=function(){var e=Object(S.a)(F.a.mark((function e(r){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post(y,{user:r});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),A="".concat("https://conduit.productionready.io/api/","/users/"),k=function(){var e=Object(S.a)(F.a.mark((function e(r){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post(A,{user:r});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),N=function(e){return{type:"AUTH_REQUEST",payload:{isProcessing:e}}},_=function(e,r,t,a){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return{type:"AUTH_SUCCES",payload:{username:e,email:r,token:t,id:a,isLogIn:n,isProcessing:o}}},P=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:"AUTH_FAILURE",payload:{errors:e,isProcessing:r}}},T=t(81),j=T.a().shape({username:T.b().max(20,"Must be shorter").required("Required"),email:T.b().email("Invalid email address").required("Required"),password:T.b().min(8,"Must be longer than 8 characters").max(40,"Must be shorter").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Must have one Big or more letter and one or more number").required("Required")}),I=t(260),U=t(155),x=t.n(U),C=(t(199),Object(u.b)((function(e){return{serverErrors:e.auth.errors}}))((function(e){var r=e.serverErrors;if(!r)return null;var t=n.a.createElement("ul",{className:"ServerErrors"},Object.keys(r).map((function(e,t){return n.a.createElement("li",{key:x.a.uniqueId(t),className:"ServerErrors-Item"},n.a.createElement(I.a,{twoToneColor:"#cf1322"}),n.a.createElement("span",{className:"ServerErrors-ItemText"},"".concat(e,": ").concat(r[e])))})));return n.a.createElement("div",{className:"ServerErrorsWrap"},t)}))),B={username:"",email:"",password:""},L=Object(u.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{regFunc:function(r,t,a){return e(function(e,r,t){return function(){var a=Object(S.a)(F.a.mark((function a(n){var o,s,c,u,i,l;return F.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(N(!0)),a.prev=1,a.next=4,k({username:t,email:e,password:r});case 4:o=a.sent,s=o.data.user,c=s.username,u=s.email,i=s.token,l=s.id,localStorage.setItem("token",i),localStorage.setItem("userId",l),n(_(c,u,i,l)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),n(P(a.t0.response.data.errors));case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(r,t,a))},resetErrorsFunc:function(){return e({type:"RESET_ERRORS"})}}}))((function(e){var r=e.isAuth,t=e.regFunc,a=e.resetErrorsFunc,o=e.isProcessing,s=function(e,r,t,a,o,s,c,u){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(t),n.a.createElement(g.a,{className:"Form-Field",type:r,name:e,placeholder:t,id:e,onChange:o,onBlur:s,value:a[e],style:u[e]&&c[e]?{borderColor:"red"}:{}}),u[e]&&c[e]&&n.a.createElement("div",{className:"Form-RequredField"},c[e]))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Signup Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(f.b,{initialValues:B,validationSchema:j,onSubmit:function(e,a){var n=e.email,o=e.password,s=e.username;t(n,o,s),r&&a.resetForm(B)}},(function(e){var r=e.values,t=e.handleChange,a=e.errors,c=e.touched,u=e.handleBlur,i=e.handleSubmit;return n.a.createElement(f.a,{className:"Form",onSubmit:i},s("username","text","User Name",r,t,u,a,c),s("email","email","Email",r,t,u,a,c),s("password","password","Password",r,t,u,a,c),n.a.createElement(v.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Sign up"),n.a.createElement(C,null))})),n.a.createElement(l.b,{to:"".concat("/Reg-Auth-Forms","/login"),onClick:a},"Log in")))})),q={email:"",password:""},H=Object(u.b)((function(e){return{isAuth:!!e.auth.token,isProcessing:e.auth.isProcessing}}),(function(e){return{authFunc:function(r,t){return e(function(e,r){return function(){var t=Object(S.a)(F.a.mark((function t(a){var n,o,s,c,u,i;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(N(!0)),t.prev=1,t.next=4,R({email:e,password:r});case 4:n=t.sent,o=n.data.user,s=o.username,c=o.email,u=o.token,i=o.id,localStorage.setItem("token",u),localStorage.setItem("userId",i),a(_(s,c,u,i)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a(P(t.t0.response.data.errors));case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(r,t))},resetErrorsFunc:function(){return e({type:"RESET_ERRORS"})}}}))((function(e){var r=e.isAuth,t=e.authFunc,a=e.resetErrorsFunc,o=e.isProcessing,s=function(e,r,t,a,o,s,c,u){return n.a.createElement("label",{className:"Form-Label",htmlFor:e},"".concat(t),n.a.createElement(g.a,{className:"Form-Field",type:r,name:e,placeholder:t,id:e,onChange:o,onBlur:s,value:a[e],style:u[e]&&c[e]?{borderColor:"red"}:{}}),u[e]&&c[e]&&n.a.createElement("div",{className:"Form-RequredField"},c[e]))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Login Page"),n.a.createElement("div",{className:"FormWrapper"},n.a.createElement(f.b,{initialValues:q,onSubmit:function(e,a){var n=e.email,o=e.password;t(n,o),r&&a.resetForm(q)}},(function(e){var r=e.values,t=e.handleChange,a=e.errors,c=e.touched,u=e.handleBlur,i=e.handleSubmit;return n.a.createElement(f.a,{className:"Form",onSubmit:i},s("email","email","Email",r,t,u,a,c),s("password","password","Password",r,t,u,a,c),n.a.createElement(v.a,{loading:o,className:"SubmitBtn Btn",type:"primary",htmlType:"submit"},"Log in"),n.a.createElement(C,null))})),n.a.createElement(l.b,{to:"".concat("/Reg-Auth-Forms","/signup"),onClick:a},"Signup")))})),M=(t(255),Object(u.b)((function(e){return{username:e.auth.username,isAuth:!!e.auth.token}}),(function(e){return{logOutFunc:function(){return e({type:"LOG_OUT"})}}}))((function(e){var r=e.username,t=e.isAuth,a=e.logOutFunc,o=function(){a(),localStorage.removeItem("token"),localStorage.removeItem("userId")};return t?n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",null,"Home Page"),n.a.createElement("div",{className:"UserBioWrap"},n.a.createElement("div",{className:"UserBio"},r),n.a.createElement(v.a,{className:"Btn",type:"primary",onClick:o},"Log out"))):n.a.createElement(E.a,{to:"".concat("/Reg-Auth-Forms","/login")})})));var W=Object(u.b)((function(e){return{isAuth:!!e.auth.token}}))((function(e){return e.isAuth?n.a.createElement("div",{className:"App"},n.a.createElement(E.d,null,n.a.createElement(E.b,{path:"".concat("/Reg-Auth-Forms","/"),component:M}),n.a.createElement(E.a,{to:"".concat("/Reg-Auth-Forms","/")}))):n.a.createElement("div",{className:"App"},n.a.createElement(E.d,null,n.a.createElement(E.b,{exact:!0,path:"".concat("/Reg-Auth-Forms","/signup"),component:L}),n.a.createElement(E.b,{exact:!0,path:"".concat("/Reg-Auth-Forms","/login"),component:H}),n.a.createElement(E.a,{to:"".concat("/Reg-Auth-Forms","/login")})))})),D="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):c.d,V=Object(c.e)(h,D(Object(c.a)(i.a))),X=n.a.createElement(l.a,null,n.a.createElement(u.a,{store:V},n.a.createElement(W,null)));s.a.render(X,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[169,1,2]]]);
//# sourceMappingURL=main.4411e25b.chunk.js.map